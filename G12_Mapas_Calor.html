<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>G12_Mapas_Calor</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="tutorial.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Visualización de Datos</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Módulos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="G1-ggplot2.html">Qué es la visualización de datos y ejemplos historicos</a>
    </li>
    <li>
      <a href="G2-Errores-tipicos-en-la-visualizacion.html">Errores típicos en la visualización</a>
    </li>
    <li>
      <a href="G3-Graficos-por-conteos.html">Gráficos para conteos</a>
    </li>
    <li>
      <a href="G4-Grafico-de-puntos-de-Wilkinson.html">Gráficos de puntos de Wilkinson</a>
    </li>
    <li>
      <a href="G5_geom_area_densidad_freqpoly.html">Gráficos de area y densidad</a>
    </li>
    <li>
      <a href="G6_geom_histogram.html">Histogramas</a>
    </li>
    <li>
      <a href="G7_geom_bar.html">Gráficos de barras</a>
    </li>
    <li>
      <a href="G8_geom_boxplot_geom_violin.html">Gráficos de caja y de violín</a>
    </li>
    <li>
      <a href="G9_Facet_Grid.html">Facet Grid</a>
    </li>
    <li>
      <a href="G10_Facet_wrap.html">Facet Wrap</a>
    </li>
    <li>
      <a href="G11_EVALUANDO_SUPUESTOS.html">Evaluando Supuestos</a>
    </li>
    <li>
      <a href="G12_Mapas_Calor.html">Mapas de Calor</a>
    </li>
    <li>
      <a href="G13_geom_line.html">Gráficos con lineas</a>
    </li>
    <li>
      <a href="G14_geom_point_geom_jitter.html">Geom_point y geom_jitter</a>
    </li>
    <li>
      <a href="G15_gganimate.html">Gráficos animados en movimiento</a>
    </li>
    <li>
      <a href="G16_Tablas_Tablas_Tablas.html">Tablas y Tablas</a>
    </li>
    <li>
      <a href="G17_LeafletTaller_abril2023.html">Leaflet</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Instalación básica
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Instalar-R-RStudio.html">Lo básico de RStudio</a>
    </li>
    <li>
      <a href="Introduccion-RMarkdown.html">Lo básico de RMarkdown</a>
    </li>
    <li>
      <a href="Codigos_basicos_en_R.html">R y Cheatsheets</a>
    </li>
    <li>
      <a href="R_basico.html">R Básico #2</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tareas y Ejercicios
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Ejerc_1.html">Ejercicio Básico</a>
    </li>
    <li>
      <a href="Ejerc_2_geom_point.html">Ejercicio geom_point</a>
    </li>
    <li>
      <a href="Ejerc_3_Wilkinson.html">Ejercicio Wilkinson</a>
    </li>
    <li>
      <a href="Ejerc_4_point_count.html">Ejercicio de gráficos de puntos, conteos y histograma</a>
    </li>
    <li>
      <a href="Ejerc_5_geom_line.html">Ejercicio de gráficos de lineas</a>
    </li>
    <li>
      <a href="Ejerc_6_Covid_19.html">Ejercicio Final COVID19</a>
    </li>
    <li>
      <a href="Ejerc_7_geom_point.html">Ejercicio geom_point</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Los Datos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Archivos_de_Datos.html">Archivos de Datos</a>
    </li>
    <li>
      <a href="COVID-19.html">COVID-19</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Calendario
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="schedule.html">Calendario</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Otros paquetes gg
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="ST_ggblanket.html">El paquete ggblanket</a>
    </li>
    <li>
      <a href="ST_gggibous2.html">El paquete gggibous</a>
    </li>
    <li>
      <a href="ST_ggiraph.html">El paquete ggiraph</a>
    </li>
    <li>
      <a href="ST_ggparty.html">El paquete ggparty</a>
    </li>
    <li>
      <a href="ST_ggvenn.html">El paquete ggvenn</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">G12_Mapas_Calor</h1>

</div>


<p>Fecha de la ultima revisión</p>
<pre><code>## [1] &quot;2024-02-05&quot;</code></pre>
<p><img src="Graficos/hex_ggversa.png" width="20%" /><img src="Graficos/hex_Visualizacion_Datos.png" width="20%" /></p>
<hr />
<div id="la-lista-de-packetes-para-analisis-de-los-mapas-de-calor"
class="section level2">
<h2>La lista de packetes para analisis de los Mapas de calor</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(ggversa)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span></code></pre></div>
</div>
<div id="mapas-de-calor-o-mapas-críticos-o-heat-maps-con-geom_tile"
class="section level2">
<h2>Mapas de calor o mapas críticos o Heat Maps con
<strong>geom_tile</strong></h2>
<p>Cuando hay muchas variables en el análisis, a veces podría ser más
fácil observar las diferencias entre ellas usando colores en vez de
números; por ejemplo, para visualizar los coeficientes de correlación
entre pares de variables continuas. Un mapa de calor (heat map en
inglés) nos puede ayudar pues justamente es una visualización con
gradientes de colores de valores continuos. Continuaremos utilizando la
base de datos de la orquídea <em>Dipodium</em> para explicar los tres
pasos para construir un mapa de calor de los coeficientes de
correlación.</p>
<p>Primero, necesitamos calcular los coeficientes de correlación con la
opción <strong>cor</strong>. Luego visualizaremos los datos con la
función <strong>kable</strong>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>dipodium</span></code></pre></div>
<pre><code>## # A tibble: 1,365 × 21
##    tree_number tree_species   dbh plant_number ramet_number distance orientation
##          &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;        &lt;int&gt;        &lt;int&gt;    &lt;dbl&gt;       &lt;dbl&gt;
##  1           1 E.o           75              1            1     2.47          40
##  2           1 E.o           76              2            1     1.97          50
##  3           2 E.o           76              3            1     1.95         350
##  4           3 E.o           58              4            1     3.24         210
##  5           4 E.o           NA              5            1     0.85          80
##  6           5 E.o           59              6            1     2.62         160
##  7           5 E.o           59              7            1     2.82         170
##  8           6 E.o            8              8            1     3.12         245
##  9           7 E.o           11.5            9            1     1.12         208
## 10           8 E.o            8.5           10            1     0.75         360
## # ℹ 1,355 more rows
## # ℹ 14 more variables: number_of_flowers &lt;dbl&gt;, height_inflo &lt;dbl&gt;,
## #   herbivory &lt;chr&gt;, row_position_nf &lt;int&gt;, number_flowers_position &lt;int&gt;,
## #   number_of_fruits &lt;int&gt;, perc_fr_set &lt;dbl&gt;, pardalinum_or_roseum &lt;chr&gt;,
## #   fruit_position_effect &lt;int&gt;, frutos_si_o_no &lt;int&gt;,
## #   p_or_r_infl_lenght &lt;chr&gt;, num_of_fruits &lt;int&gt;, species_name &lt;chr&gt;,
## #   cardinal_orientation &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>DWCor<span class="ot">=</span><span class="fu">round</span>(<span class="fu">cor</span>(dipodium[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>,<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">13</span>)],</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                <span class="at">use=</span><span class="st">&quot;pairwise.complete.obs&quot;</span>),<span class="dv">3</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">kable</span>(DWCor) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="st">&quot;striped&quot;</span>, <span class="at">full_width =</span> F, <span class="at">font_size =</span> <span class="dv">10</span>) </span></code></pre></div>
<table class="table table-striped" style="font-size: 10px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
dbh
</th>
<th style="text-align:right;">
distance
</th>
<th style="text-align:right;">
orientation
</th>
<th style="text-align:right;">
number_of_flowers
</th>
<th style="text-align:right;">
height_inflo
</th>
<th style="text-align:right;">
number_of_fruits
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
dbh
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.329
</td>
<td style="text-align:right;">
0.116
</td>
<td style="text-align:right;">
-0.035
</td>
<td style="text-align:right;">
-0.100
</td>
<td style="text-align:right;">
-0.009
</td>
</tr>
<tr>
<td style="text-align:left;">
distance
</td>
<td style="text-align:right;">
0.329
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
-0.074
</td>
<td style="text-align:right;">
0.042
</td>
<td style="text-align:right;">
-0.095
</td>
<td style="text-align:right;">
-0.157
</td>
</tr>
<tr>
<td style="text-align:left;">
orientation
</td>
<td style="text-align:right;">
0.116
</td>
<td style="text-align:right;">
-0.074
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
-0.076
</td>
<td style="text-align:right;">
-0.093
</td>
<td style="text-align:right;">
0.030
</td>
</tr>
<tr>
<td style="text-align:left;">
number_of_flowers
</td>
<td style="text-align:right;">
-0.035
</td>
<td style="text-align:right;">
0.042
</td>
<td style="text-align:right;">
-0.076
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.628
</td>
<td style="text-align:right;">
0.234
</td>
</tr>
<tr>
<td style="text-align:left;">
height_inflo
</td>
<td style="text-align:right;">
-0.100
</td>
<td style="text-align:right;">
-0.095
</td>
<td style="text-align:right;">
-0.093
</td>
<td style="text-align:right;">
0.628
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.106
</td>
</tr>
<tr>
<td style="text-align:left;">
number_of_fruits
</td>
<td style="text-align:right;">
-0.009
</td>
<td style="text-align:right;">
-0.157
</td>
<td style="text-align:right;">
0.030
</td>
<td style="text-align:right;">
0.234
</td>
<td style="text-align:right;">
0.106
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
<p>Segundo, reorganizaremos los datos en un data.frame usando la
librería <strong>reshape2</strong> y la opción <strong>melt</strong>. En
nuestro caso, lo que queremos es producir un data.frame con solo dos
columnas con las variables en pares con su respectivo valor de
correlación. En el nuevo data.frame, <strong>DWMelt</strong>, vemos tres
columnas cada una representando las variables y la última con el valor
de correlación.</p>
<hr />
</div>
<div id="matriz-de-correlaciones" class="section level2">
<h2>Matriz de correlaciones</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>DWMelt<span class="ot">=</span> <span class="fu">melt</span>(DWCor, <span class="at">varnames=</span> <span class="fu">c</span>(<span class="st">&quot;x1&quot;</span>, <span class="st">&quot;y1&quot;</span>),</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>             <span class="at">value.name =</span> <span class="st">&quot;Correlation&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">head</span>(DWMelt)</span></code></pre></div>
<pre><code>##                  x1  y1 Correlation
## 1               dbh dbh       1.000
## 2          distance dbh       0.329
## 3       orientation dbh       0.116
## 4 number_of_flowers dbh      -0.035
## 5      height_inflo dbh      -0.100
## 6  number_of_fruits dbh      -0.009</code></pre>
<p>Finalmente, el tercer paso es producir la figura con
<strong>geom_tile</strong>. El gráfico de la Figura se produce sin
modificar los parámetros. En el segundo gráfico se modifican los colores
usando la guía de color para asignarlos a diferentes grupos a la vez que
se remueven los nombres de los ejes de <strong>X</strong> y de
<strong>Y</strong>. A este mapa de calor básico se le asignan las
variables de <strong>x</strong> y <strong>y</strong> y el valor que
queremos que tenga un rango de color, en este caso el valor de
correlación. Para remover el nombre de la variables <strong>x</strong> y
<strong>y</strong>, se usa <strong>labs(x=NULL, y=NULL)</strong>, ya que
ggplot2 lo pone automáticamente cuando se construye un gráfico. Note que
para remover el nombre de la columna en los ejes se usa
<strong>xlab(““)</strong> y <strong>ylab(““)<strong>. Aqui se añade
solamente </strong>xlab(”“)</strong> y nota que ahora no se ve el nombre
de la columna.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">ggplot</span>(DWMelt, <span class="fu">aes</span>(<span class="at">x=</span>x1, <span class="at">y=</span>y1))<span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill=</span>Correlation))<span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>        <span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>, <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">&quot;Correlación&quot;</span>)<span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="G12_Mapas_Calor_files/figure-html/heatmap1-1.png" width="672" /></p>
<p>Le cambiamos los colores del gráfico, usando
<strong>scale_fill_gradient2</strong>. Asignamos los valores más bajos
al color amarillo, los más altos al rojo y los valores intermedios al
color anaranjado. Para esta opción de
<strong>scale_fill_gradient2</strong>, hay que asignar tanto los colores
al extremo y el del medio. El resultado se puede ver en la Figura. Note
que los valores de correlaciones varían de -1 a +1. El límite del rango
se asigna especificando <strong>limits=c(valor mínimo, valor
máximo)</strong>. Dado esto, en este ejemplo la intensidad de colores no
es tan amplia porque no hay valores muy negativos.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">ggplot</span>(DWMelt, <span class="fu">aes</span>(<span class="at">x=</span>x1, <span class="at">y=</span>y1))<span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill=</span>Correlation))<span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                       <span class="at">mid=</span><span class="st">&quot;white&quot;</span>, <span class="at">high=</span><span class="st">&quot;red&quot;</span>,</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="at">guide=</span><span class="fu">guide_colorbar</span>(<span class="at">ticks=</span><span class="cn">FALSE</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>                       <span class="at">barheight=</span><span class="dv">5</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">5</span>,<span class="dv">1</span>)))<span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>,<span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>        <span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>, <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">&quot;Correlación&quot;</span>)</span></code></pre></div>
<p><img src="G12_Mapas_Calor_files/figure-html/heatmap2-1.png" width="672" /></p>
<p>En el siguiente gráfico, se cambia el valor intermedio a blanco (para
valores más cercanos a cero).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">ggplot</span>(DWMelt, <span class="fu">aes</span>(<span class="at">x=</span>x1, <span class="at">y=</span>y1))<span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill=</span>Correlation))<span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low=</span><span class="st">&quot;yellow&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>                       <span class="at">mid=</span><span class="st">&quot;white&quot;</span>, <span class="at">high=</span><span class="st">&quot;red&quot;</span>,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="at">guide=</span><span class="fu">guide_colorbar</span>(<span class="at">ticks=</span><span class="cn">FALSE</span>,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>                       <span class="at">barheight=</span><span class="dv">5</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>)))<span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>,<span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>        <span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>, <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">&quot;Correlación&quot;</span>)</span></code></pre></div>
<p><img src="G12_Mapas_Calor_files/figure-html/heatmap3-1.png" width="672" /></p>
<p>Se puede también hacer la selección de solamente dos colores con la
función <strong>scale_fill_gradient</strong> (vea que esa opción no es
lo mismo que <strong>scale_fill_gradient2</strong>). En este caso los
gradientes de colores en el centro de la distribución (el cero) no está
definido.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">ggplot</span>(DWMelt, <span class="fu">aes</span>(<span class="at">x=</span>x1, <span class="at">y=</span>y1))<span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill=</span>Correlation))<span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low=</span><span class="st">&quot;white&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>                      <span class="at">high=</span><span class="st">&quot;red&quot;</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span><span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>        <span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>, <span class="at">face=</span><span class="st">&quot;italic&quot;</span>, <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">&quot;Correlación&quot;</span>)</span></code></pre></div>
<p><img src="G12_Mapas_Calor_files/figure-html/heatmap4-1.png" width="672" /></p>
<hr />
</div>
<div id="la-función-ggcorr" class="section level2">
<h2>La función <strong>ggcorr</strong></h2>
<p>La función <strong>ggcor</strong> tiene la ventaja de producir un
gráfico de calor que representa solamente un espejo de los resultados.
En los gráficos anteriores las misma información estaba ariba y abajo de
la diagonal. Este represente solamente uno de los dos.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">ggcorr</span>(DWCor, <span class="at">low =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="at">mid =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;darkred&quot;</span>, <span class="at">nbreaks=</span><span class="dv">4</span>)</span></code></pre></div>
<p><img src="G12_Mapas_Calor_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Para un segundo ejemplo de <strong>ggcorr</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">ggcorr</span>(DWCor, <span class="at">geom =</span> <span class="st">&quot;blank&quot;</span>, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">hjust =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="fu">aes</span>(<span class="at">color =</span> coefficient <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="at">alpha =</span> <span class="fu">abs</span>(coefficient) <span class="sc">&gt;</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;TRUE&quot;</span> <span class="ot">=</span> <span class="fl">0.25</span>, <span class="st">&quot;FALSE&quot;</span> <span class="ot">=</span> <span class="dv">0</span>)) <span class="sc">+</span><span class="fu">guides</span>(<span class="at">scale =</span> <span class="st">&quot;none&quot;</span>, <span class="at">alpha =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="G12_Mapas_Calor_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Para muchos ejemplos vea este enlace. <a
href="https://briatte.github.io/ggcorr/"
class="uri">https://briatte.github.io/ggcorr/</a></p>
<hr />
</div>
<div id="opciones-y-parametros-de-geom_tile" class="section level2">
<h2>Opciones y Parametros de <strong>geom_tile</strong></h2>
<ul>
<li><p>ggplot(el archivo de datos, aes(x= la variable discreta,
y=variable continua, ymax= el valor máximo, ymin= el valor
mínimo))</p></li>
<li><p>geom_tile(x, y, alpha, color, fill, linetype, size)</p></li>
<li><p>alpha: la intensidad del color</p></li>
<li><p>color: el color de la línea</p></li>
<li><p>fill: el color de los cuadros</p></li>
<li><p>linetype: representa el estilo de línea</p></li>
<li><p>size: representa el ancho de la línea</p></li>
</ul>
</div>
<div id="opciones-y-parametros-de-ggcorr" class="section level2">
<h2>Opciones y Parametros de <strong>ggcorr()</strong></h2>
<p>ggcorr(df, method=c(“pairwise”, “pearson”))</p>
<ul>
<li>nbreaks: a cantidad de categorias</li>
<li>digits: la cantidad de digitos para visualizar la correlación</li>
<li>low = “#3B9AB2”, El color básico de las corrlea ciones
negativas</li>
<li>mid = “#EEEEEE”, El color básico</li>
<li>high = “#F21A00”,El color básico</li>
<li>midpoint = 0: la correlación central que sera el color “mid”</li>
<li>ver <strong>ggcorr</strong> para otras opciones</li>
</ul>
<hr />
<ol style="list-style-type: decimal">
<li>Anolis Data: Usa los datos del archivo <strong>Anolis</strong> en el
paquete <strong>ggversa</strong> y haga un heat map de las siguientes
variables, SVL, TAIL, Perch_Diameter, HEIGHT. Selecciona las variables,
calcular las correlaciones y selecciona el rango de colores que
representa bien el rango de correlaciones.</li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
