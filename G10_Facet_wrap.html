<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Facet_wrap</title>

<script src="site_libs/header-attrs-2.4/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ff0000; font-weight: bold; } /* Alert */
      code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #7d9029; } /* Attribute */
      code span.bn { color: #40a070; } /* BaseN */
      code span.bu { } /* BuiltIn */
      code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4070a0; } /* Char */
      code span.cn { color: #880000; } /* Constant */
      code span.co { color: #60a0b0; font-style: italic; } /* Comment */
      code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #ba2121; font-style: italic; } /* Documentation */
      code span.dt { color: #902000; } /* DataType */
      code span.dv { color: #40a070; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #40a070; } /* Float */
      code span.fu { color: #06287e; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #007020; font-weight: bold; } /* Keyword */
      code span.op { color: #666666; } /* Operator */
      code span.ot { color: #007020; } /* Other */
      code span.pp { color: #bc7a00; } /* Preprocessor */
      code span.sc { color: #4070a0; } /* SpecialChar */
      code span.ss { color: #bb6688; } /* SpecialString */
      code span.st { color: #4070a0; } /* String */
      code span.va { color: #19177c; } /* Variable */
      code span.vs { color: #4070a0; } /* VerbatimString */
      code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="tutorial.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Visualización de Datos</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="schedule.html">Calendario</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Módulos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="G1-ggplot2.html">Qué es la visualización de datos y ejemplos historicos</a>
    </li>
    <li>
      <a href="G2-Errores-tipicos-en-la-visualizacion.html">Errores típicos en la visualización</a>
    </li>
    <li>
      <a href="G3-Graficos-por-conteos.html">Gráficos para conteos</a>
    </li>
    <li>
      <a href="G4-Grafico-de-puntos-de-Wilkinson.html">Gráficos de puntos de Wilkinson</a>
    </li>
    <li>
      <a href="G5_geom_area_densidad_freqpoly.html">Gráficos de area y densidad</a>
    </li>
    <li>
      <a href="G6_geom_histogram.html">Histogramas</a>
    </li>
    <li>
      <a href="G7_geom_bar.html">Gráficos de barras</a>
    </li>
    <li>
      <a href="G8_geom_boxplot_geom_violin.html">Gráficos de caja y de violín</a>
    </li>
    <li>
      <a href="G9_Facet_Grid.html">Facet Grid</a>
    </li>
    <li>
      <a href="G10_Facet_wrap.html">Facet Wrap</a>
    </li>
    <li>
      <a href="G11_EVALUANDO_SUPUESTOS.html">Evaluando Supuestos</a>
    </li>
    <li>
      <a href="G12_Mapas_Calor.html">Mapas de Calor</a>
    </li>
    <li>
      <a href="G13_geom_line.html">Gráficos con lineas</a>
    </li>
    <li>
      <a href="G14_geom_point_geom_jitter.html">Geom_point y geom_jitter</a>
    </li>
    <li>
      <a href="G15_gganimate.html">Gráficos animados en movimiento</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Sreencasts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="screencast_t_test.html">t-test Screencast</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Instalación básica
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Instalar-R-RStudio.html">Lo básico de RStudio</a>
    </li>
    <li>
      <a href="Introduccion-RMarkdown.html">Lo básico de RMarkdown</a>
    </li>
    <li>
      <a href="Codigos_basicos_en_R.html">R y Cheatsheets</a>
    </li>
    <li>
      <a href="R_basico.html">R Básico #2</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tareas y Ejercicios
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Ejerc_1.html">Ejercicio Básico</a>
    </li>
    <li>
      <a href="Ejerc_2_geom_point.html">Ejercicio geom_point</a>
    </li>
    <li>
      <a href="Ejerc_3_Wilkinson.html">Ejercicio Wilkinson</a>
    </li>
    <li>
      <a href="Ejerc_4_point_count.html">Ejercicio de gráficos de puntos, conteos y histograma</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Los Datos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Archivos_de_Datos.html">Archivos de Datos</a>
    </li>
    <li>
      <a href="COVID-19.html">COVID-19</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Facet_wrap</h1>

</div>


<p>Fecha de la ultima revisión</p>
<pre><code>## [1] &quot;2020-10-14&quot;</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">library</span>(ggversa)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<hr />
<div id="gráficos-por-categoría-con-facet_wrap" class="section level1">
<h1>Gráficos por categoría con <strong>facet_wrap</strong></h1>
</div>
<div id="facet_wrap-descripción-general" class="section level1">
<h1><strong>Facet_wrap</strong>: Descripción general</h1>
<p>En este modulo se muestra una de las grandes ventajas de usar ggplot2. Para la producción de un gráfico por diferentes grupos o categorías, se usa la opción de <strong>facet_wrap()</strong>; o sea, cada grupo genera la producción de un gráfico. Por ejemplo, observe en la Figura que cada localidad de muestreo genera su propio gráfico. Para lograr esos cuatro gráficos, se necesitaron tres variables, en que por lo menos una es categórica. En este ejemplo se representa la cantidad de <em>Anolis</em> muestreado en el periodo seco y lluvioso separado por las cuatro localidades en el bosque usando geom_bar. Note la tilde, <strong>~</strong>, antes del nombre de la variable categórica <strong>Survey_Site</strong>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">head</span>(Anolis)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 15
##   STUDY Survey_Site LOCATION TIME  DATE  SEASON SPECIES SEX_AGE HEIGHT
##   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;tim&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;
## 1 Mark… North Tower El Verde 10:46 3/13… dry    Anolis… Female     0  
## 2 Mark… Woods walk… El Verde 10:15 2/20… dry    Anolis… Juvenil    0  
## 3 Mark… Woods walk… El Verde 11:15 2/21… dry    Anolis… Male       0  
## 4 Mark… North Tower El Verde 11:06 3/16… dry    Anolis… Juvenil    0.3
## 5 Mark… North Tower El Verde 12:31 3/11… dry    Anolis… Male       0.3
## 6 Mark… North Tower El Verde 01:00 3/9/… dry    Anolis… Female     0.4
## # … with 6 more variables: DISTANCE_FROM_CENTERLINE &lt;dbl&gt;,
## #   PERCH_SUBSTRATE &lt;chr&gt;, PERCH_DIAMETER &lt;int&gt;, WEIGHT &lt;dbl&gt;, SVL &lt;dbl&gt;,
## #   TAIL &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>barraA=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SEX_AGE, <span class="dt">fill=</span>SEASON))</span>
<span id="cb5-2"><a href="#cb5-2"></a>barraA<span class="op">+</span><span class="kw">geom_bar</span>()<span class="op">+</span><span class="st">  </span><span class="co"># contabiliza la cantidad de información por factor</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(Survey_Site<span class="op">~</span>.)<span class="op">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Frecuencia&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Género y edad&quot;</span>)<span class="op">+</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
<p>En el próximo gráfico se usa <strong>geom_point</strong> combinado con <strong>facet_wrap</strong> con las variables de tamaño de los <em>Anolis</em> y la altitud del lugar de muestreo en donde el lagarto fue encontrado.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>barraC=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb6-2"><a href="#cb6-2"></a>barraC<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site)<span class="op">+</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altura del muestreo&quot;</span>)<span class="op">+</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap1-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
<div id="facet_wrap-gráficos-en-una-fila" class="section level2">
<h2><strong>Facet_wrap</strong>: Gráficos en una fila</h2>
<p>Para cambiar la cantidad de columnas o filas se usa <strong>nrow</strong> y <strong>ncol</strong>. En el ejemplo ponemos todos los gráficos en una fila con <strong>nrow</strong> igual a 1.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>barraD=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb7-2"><a href="#cb7-2"></a>barraD<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site, <span class="dt">nrow=</span><span class="dv">1</span>)<span class="op">+</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap2-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="facet_wrap-gráficos-en-una-columna" class="section level2">
<h2>Facet_wrap: Gráficos en una columna</h2>
<p>Por otro lado, en el próximo ejemplo reorganizamos los gráficos para que queden uno debajo de los otros en una columna con <strong>ncol</strong> igual a 1.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>barraC=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb8-2"><a href="#cb8-2"></a>barraC<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site, <span class="dt">ncol=</span><span class="dv">1</span>)<span class="op">+</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap3-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="facet_wrap-con-escala-libre" class="section level2">
<h2><strong>Facet_wrap</strong>: Con escala libre</h2>
<p>A veces queremos tener los gráficos por categoría sobre la misma columna <strong>ncol=1</strong> pero que a la misma vez la escala de cada grupo se refleje de acuerdo a los datos. Note que en el gráfico anterior todas los gráficos tienen la misma escala de 0 a 60. Si queremos que las escalas en los ejes de <strong>X</strong> y <strong>Y</strong> queden ajustadas de acuerdo a los datos de cada grupo, se utiliza la opción y parámetro <strong>(scales=“free”)</strong> . Note en la Figura que ahora cada gráfico tiene su propria escala:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>barraC=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb9-2"><a href="#cb9-2"></a>barraC<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site, <span class="dt">ncol=</span><span class="dv">1</span>, <span class="dt">scales=</span><span class="st">&quot;free&quot;</span>)<span class="op">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap3a-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="facet_wrap-con-múltiples-variables" class="section level2">
<h2><strong>Facet_wrap</strong>: Con múltiples variables</h2>
<p>Podríamos también querer organizar los gráficos de acuerdo a múltiples variables categóricas mostrando así la agrupación de los datos. En el ejemplo se agrupan de acuerdo al sitio de muestreo (Gap, North, South o Woods) y al periodo del año (seco o mojado). De esta forma, se pueden producir gráficos agrupados por múltiples variables discretas. Note que lo único que se tuvo que hacer fue añadir <strong>~variable1 + variable2</strong>; en nuestro caso, <strong>~Survey_Site + SEASON</strong>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>barraE=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb10-2"><a href="#cb10-2"></a>barraE<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site<span class="op">+</span>SEASON)<span class="op">+</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap4-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="facet_wrap-mostrar-los-grupos-aunque-no-tengan-datos" class="section level2">
<h2><strong>Facet_wrap</strong>: Mostrar los grupos aunque no tengan datos</h2>
<p>En el ejemplo que hemos estado mostrando hay localidades en que no hay datos, como en Gap Tower en la época lluviosa, en South Tower en la época seca, y en Woods Walkway Tower en la época lluviosa, y por eso no aparecen en la figura. Si queremos mostrar los gráficos de esos sitios donde no existe información, se usa la opción de <strong>drop = FALSE</strong>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>barraE=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb11-2"><a href="#cb11-2"></a>barraE<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site<span class="op">+</span>SEASON,<span class="dt">drop=</span><span class="ot">FALSE</span>, <span class="dt">ncol=</span><span class="dv">2</span>)<span class="op">+</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap4a-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="cambiando-la-escala-con-scales" class="section level2">
<h2>Cambiando la escala con <strong>scales</strong></h2>
<p>En la Figura anterior todos los graficos muestran la misma escala para cada uno. Para que cada uno tenga su propia escala, nuevamente usamos <strong>scales=free</strong>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>barraF=<span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(SVL, HEIGHT))</span>
<span id="cb12-2"><a href="#cb12-2"></a>barraF<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site, <span class="dt">scales=</span><span class="st">&quot;free&quot;</span>)<span class="op">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap5-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="solapamiento-de-datos-entre-los-grupos" class="section level2">
<h2>Solapamiento de datos entre los grupos</h2>
<p>A veces puede ser más fácil interpretar los datos y la distribución de un grupo si estos están solapados con los datos de los otros grupos, especialmente si se usan colores diferentes por grupo. Una alternativa es graficar todos los datos en cada uno de los gráficos individuales, pero que los que no son del gráfico que no se quiere resaltar se muestren en un color más atenuado, mientras que los datos que se quieren resaltar salgan en un color más prominente. Para lograr ese efecto, a continuación se crea un nuevo data frame con <strong>data = transform(Anolis, Survey_Site = NULL)</strong> basándonos en el data frame anterior. Con la opción NULL estamos removiendo la variable que usamos para hacer el facetting; o sea, la distribución de datos por categoría, que en nuestro caso es <strong>Survey_Site</strong>. También se le añade un color diferente a los cuatro grupos. Note que el código para el color atenuado, en este caso <strong>grey85</strong>, tiene que escribirse antes del código que graficará la variable que queremos resaltar con color <strong>Survey_Site</strong>, ya que esta última estará en una capa superior y, a consecuencia, se esconderán algunos de los puntos de la capa inferior.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(<span class="dt">x=</span>SVL, <span class="dt">y=</span>HEIGHT, <span class="dt">colour=</span>Survey_Site))<span class="op">+</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> <span class="kw">transform</span>(Anolis,</span>
<span id="cb13-3"><a href="#cb13-3"></a>            <span class="dt">Survey_Site =</span> <span class="ot">NULL</span>), <span class="dt">colour =</span> <span class="st">&quot;grey85&quot;</span>)<span class="op">+</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site)<span class="op">+</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap6-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="cambiar-la-posición-del-nombre-del-grupo-en-el-eje-de-x" class="section level2">
<h2>Cambiar la posición del nombre del grupo en el eje de <strong>X</strong></h2>
<p>Para que el nombre de cada grupo salga debajo de cada gráfico en el eje de <strong>X</strong>, usar strip.position = “bottom”, “top”, “left”, “right”:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(<span class="dt">x=</span>SVL, <span class="dt">y=</span>HEIGHT, <span class="dt">colour=</span>Survey_Site))<span class="op">+</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> <span class="kw">transform</span>(Anolis,</span>
<span id="cb14-3"><a href="#cb14-3"></a>            <span class="dt">Survey_Site =</span> <span class="ot">NULL</span>), <span class="dt">colour =</span> <span class="st">&quot;grey85&quot;</span>)<span class="op">+</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site, <span class="dt">strip.position =</span> <span class="st">&quot;bottom&quot;</span>)<span class="op">+</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap6a-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="cambiar-el-nombre-del-grupo-al-eje-de-y" class="section level2">
<h2>Cambiar el nombre del grupo al eje de <strong>Y</strong></h2>
<p>El nombre de cada grupo se cambia al eje de Y al usando la función <strong>switch=y</strong>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">ggplot</span>(Anolis, <span class="kw">aes</span>(<span class="dt">x=</span>SVL, <span class="dt">y=</span>HEIGHT, <span class="dt">colour=</span>Survey_Site))<span class="op">+</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> <span class="kw">transform</span>(Anolis,</span>
<span id="cb15-3"><a href="#cb15-3"></a>            <span class="dt">Survey_Site =</span> <span class="ot">NULL</span>), <span class="dt">colour =</span> <span class="st">&quot;grey85&quot;</span>)<span class="op">+</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Survey_Site, <span class="dt">strip.position =</span> <span class="st">&quot;left&quot;</span>)<span class="op">+</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Altitud&quot;</span>)<span class="op">+</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1232 rows containing missing values (geom_point).</code></pre>
<pre><code>## Warning: Removed 308 rows containing missing values (geom_point).</code></pre>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap6b-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
</div>
<div id="demostración-con-datos-climatológicos" class="section level1">
<h1>Demostración con datos climatológicos</h1>
<p><strong>Facet_wrap</strong> se puede usar en combinación con todas las funciones tipo <strong>geom</strong>. A continuación se demostrará un ejemplo con <strong>geom_line</strong>. Para visualizar las ventajas de esa combinación, utilizaremos datos sobre las temperaturas mínimas diurnas de la ciudad de Morelia, Michoacán, México, disponible en CLIMCOM, <a href="http://clicom-mex.cicese.mx" class="uri">http://clicom-mex.cicese.mx</a>. Los datos del archivo original van de noviembre 1947 a marzo del 2012. A continuación solo se mostrarán del 1951 hasta el 1959. Note que aparecen todos los años juntos, lo que lo hace un poco difícil de analizar. Para reproducir este gráfico, primero hay que instalar y activar la librería <strong>lubridate</strong> que se usará para manipular los datos relacionados a las fechas. En el paquete <strong>lubridate</strong> se encuentra una serie de funciones para reorganizar y manipular datos de fechas y horas en distintos formatos. El segundo paso es seleccionar solamente los datos de interés con la opción <strong>with</strong>. El tercer paso es convertir los datos de fecha que estén en tres columnas, <strong>Mes</strong>, <strong>Dia</strong> y <strong>Year</strong> (o <strong>Año</strong>), y crear una columna de fecha donde la organización de la fecha es año-mes-día. El paso final es convertir la fecha al día del año (1-365).</p>
<p>Veamos las primeras filas del archivo, donde en la primera se muestra que en el 8 de octubre de 1947 la temperatura mínima fue de 11C°.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">head</span>(MORELIA.MICH.Tmin)</span></code></pre></div>
<pre><code>##   Mes Dia Year Tmin
## 1  10   8 1947 11.0
## 2  10   9 1947 11.0
## 3  10  10 1947  9.0
## 4  10  11 1947 10.0
## 5  10  12 1947 12.0
## 6  10  13 1947 12.5</code></pre>
<p>Ahora se selecciona solamente parte de los datos, del 1 de enero del 1951 al 31 de diciembre del 1959.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>MM=MORELIA.MICH.Tmin<span class="op">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="st">  </span><span class="kw">filter</span>(Year<span class="op">&gt;</span><span class="dv">1950</span> <span class="op">&amp;</span><span class="st"> </span>Year<span class="op">&lt;</span><span class="dv">1960</span>)</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a></span>
<span id="cb20-6"><a href="#cb20-6"></a></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co">#Una función para seleccionar un conjunto de datos</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="co">#M=MORELIA.MICH.Tmin %&gt;%</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="co">#  filter(Year %in% c(1950:1955, 2009:2011))</span></span></code></pre></div>
<div id="unir-columnas-de-fecha-en-una-variable-de-tiempo" class="section level2">
<h2>Unir columnas de fecha en una variable de tiempo</h2>
<p>Ahora se define la variable para la fecha con la función <strong>ymd</strong> para indicar que el orden de la fecha es año-mes-día. También se identifica cuántos dígitos tiene cada elemento de la fecha utilizando <strong>%04</strong> para 4 cifras para el año y <strong>%02</strong> para dos cifras para mes y día. Subsiguientemente se identifica a cuál columna corresponde ubicar a cada uno.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="kw">head</span>(MM, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   Mes Dia Year Tmin
## 1   1   1 1951    4
## 2   1   2 1951   10
## 3   1   3 1951    1</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>MM<span class="op">$</span>fecha &lt;-<span class="st"> </span><span class="kw">with</span>(MM, <span class="kw">ymd</span>(<span class="kw">sprintf</span>(<span class="st">&#39;%04d%02d%02d&#39;</span>,</span>
<span id="cb23-2"><a href="#cb23-2"></a>                                 Year, Mes, Dia)))</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw">head</span>(MM)</span></code></pre></div>
<pre><code>##   Mes Dia Year Tmin      fecha
## 1   1   1 1951  4.0 1951-01-01
## 2   1   2 1951 10.0 1951-01-02
## 3   1   3 1951  1.0 1951-01-03
## 4   1   4 1951  1.0 1951-01-04
## 5   1   5 1951  1.5 1951-01-05
## 6   1   6 1951  3.0 1951-01-06</code></pre>
</div>
<div id="cambiando-la-fecha-en-posición-de-1-al-365-del-año" class="section level2">
<h2>Cambiando la fecha en posición de 1 al 365 del año</h2>
<p>Con la función <strong>yday</strong> se puede identificar cuál día de los 365 del año es que corresponde dentro de cada una de las fechas. Por ejemplo, el primero de enero corresponde al día 1 y el día 15 de febrero corresponde al día 46 del año (31 días de enero más los 15 días de febrero), y así sucesivamente. La nueva variable <strong>diaanual</strong> recoge esa información:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb25-2"><a href="#cb25-2"></a>MM<span class="op">$</span>diaanual=<span class="kw">yday</span>(MM<span class="op">$</span>fecha)</span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="kw">tail</span>(MM)</span></code></pre></div>
<pre><code>##      Mes Dia Year Tmin      fecha diaanual
## 3282  12  26 1959  1.1 1959-12-26      360
## 3283  12  27 1959  1.7 1959-12-27      361
## 3284  12  28 1959  1.1 1959-12-28      362
## 3285  12  29 1959  0.0 1959-12-29      363
## 3286  12  30 1959 -0.6 1959-12-30      364
## 3287  12  31 1959 -1.1 1959-12-31      365</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">yday</span>(<span class="st">&quot;1959-03-01&quot;</span>) <span class="co"># El día del año que nací</span></span></code></pre></div>
<pre><code>## [1] 60</code></pre>
<p>Veamos ahora el resultado. El gráfico de la figura produce una línea por cada año. Note que hay que identificar que el año es un factor usando <strong>color=factor(Year)</strong>. Si no se hace así, el año se interpretará como un valor continuo.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">ggplot</span>(MM, <span class="kw">aes</span>(<span class="dt">x=</span>diaanual, <span class="dt">y=</span>Tmin, <span class="dt">color=</span><span class="kw">factor</span>(Year)))<span class="op">+</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))<span class="op">+</span></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Día del año&quot;</span>)<span class="op">+</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Temperatura mínima&quot;</span>)</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap7e-1.png" width="672" style="display: block; margin: auto;" /></p>
<hr />
</div>
<div id="facet_wrap-climatológico" class="section level2">
<h2><strong>Facet_wrap</strong> climatológico</h2>
<p>Como podemos apreciar en la Figura las líneas que representan las fechas son muy difíciles de analizar debido al solapamiento. Ahora utilizamos <strong>facet_wrap</strong> para que aparezcan separadas por la categoría de año, <strong>Year</strong>. Note la tilde en <strong>facet_wrap</strong>, <strong>~</strong>, antes del nombre de la variable categórica, <strong>Year</strong>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="kw">ggplot</span>(MM, <span class="kw">aes</span>(<span class="dt">x=</span>diaanual, <span class="dt">y=</span>Tmin, <span class="dt">color=</span><span class="kw">factor</span>(Year)))<span class="op">+</span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span></span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Year)<span class="op">+</span></span>
<span id="cb30-4"><a href="#cb30-4"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)<span class="op">+</span></span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))<span class="op">+</span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Día del año&quot;</span>)<span class="op">+</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Temperatura mínima&quot;</span>)</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap8-1.png" width="672" /></p>
<hr />
</div>
<div id="modificar-el-orden-en-que-se-presentan-los-gráficos" class="section level2">
<h2>Modificar el orden en que se presentan los gráficos</h2>
<p>Por omisión, los gráficos van a la horizontal primero (de izquierda a derecha) y luego hacia abajo. Si se desea que bajen a la vertical primero (de arriba para abajo) y luego a la izquierda, se usa la opción <strong>dir</strong>. De esa manera, se puede notar que ahora se llena la primera columna, después la segunda y luego la tercera columna, y así sucesivamente. Para lograr ese efecto se utilizó la opción <strong>dir=v</strong> en la función <strong>facet_wrap</strong>, <strong>v</strong> de vertical; o sea, que baje a la vertical primero.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">ggplot</span>(MM, <span class="kw">aes</span>(<span class="dt">x=</span>diaanual, <span class="dt">y=</span>Tmin, <span class="dt">color=</span><span class="kw">factor</span>(Year)))<span class="op">+</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Year, <span class="dt">dir=</span><span class="st">&quot;v&quot;</span>)<span class="op">+</span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)<span class="op">+</span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Temperatura mínima&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Día del año&quot;</span>)<span class="op">+</span></span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>,<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<p><img src="G10_Facet_wrap_files/figure-html/facetwrap9-1.png" width="672" style="display: block; margin: auto;" /></p>
<ol style="list-style-type: decimal">
<li>Ejercico para someter en Edmodo. Se usará los daTos de temperatura del pueblo de <strong>ASBESTOS_QUEBEC</strong> con la temperatura minima o máxima (selecciona el que prefiere). El primer paso en crear una columna con la fecha en formato de <strong>fecha</strong>. Note que la columna <strong>Fecha</strong> esta en formato de <strong>factor</strong>, Y no es reconocido como una fecha. Para usar el paquete <strong>lubridate</strong>, hay que tener la fechas en formato qu8e inlcuye tanto el año, mes y el día. En este caso el archivo tiene solamente el año y el mes, para solucionar este problema, se añade una nueva columna <strong>day1</strong> con el primer día del cada mes. Esta columna hay que convertir del formato <strong>double</strong> a formato <strong>integer</strong> con la función <strong>as.integer( )</strong>. Ahora tanto las columnas de <strong>Year, Mes y day1</strong> son en formato de <strong>integer</strong>. Después de formatear los datos correctamente, usando los scripts abajo.<br />
</li>
</ol>
<ul>
<li>Construye un facet wrap de todos los años y someterlo a Edmodo en formato .png.</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">library</span>(ggversa)</span>
<span id="cb32-2"><a href="#cb32-2"></a></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="kw">head</span>(ASBESTOS_QUEBEC)</span></code></pre></div>
<pre><code>##   Year Mes Temp_Prom_Max Temp_Prom_Min   Fecha
## 1 1948   6          22.2           9.9 1948-06
## 2 1948   7          25.5          14.2 1948-07
## 3 1948   8          24.9          14.2 1948-08
## 4 1948   9          21.6           8.4 1948-09
## 5 1948  10          12.0           2.6 1948-10
## 6 1948  11          10.3           1.9 1948-11</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>ASBESTOS_QUEBEC<span class="op">$</span>day1=<span class="kw">c</span>(<span class="dv">1</span>)<span class="co"># añadir una columna con el dia 1 de cada mes</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>ASBESTOS_QUEBEC<span class="op">$</span>day1=<span class="kw">as.integer</span>(ASBESTOS_QUEBEC<span class="op">$</span>day1) <span class="co"># convert to integer</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="kw">head</span>(ASBESTOS_QUEBEC)</span></code></pre></div>
<pre><code>##   Year Mes Temp_Prom_Max Temp_Prom_Min   Fecha day1
## 1 1948   6          22.2           9.9 1948-06    1
## 2 1948   7          25.5          14.2 1948-07    1
## 3 1948   8          24.9          14.2 1948-08    1
## 4 1948   9          21.6           8.4 1948-09    1
## 5 1948  10          12.0           2.6 1948-10    1
## 6 1948  11          10.3           1.9 1948-11    1</code></pre>
<p>Tenemos que unir las columnas <strong>Year, Mes y day1</strong> en una en formato de <strong>date</strong>. Note que se usa la función <strong>ymd</strong> para <strong>year/month/day</strong>, si lo queremos formateado en <strong>day/month/year</strong>, se usaria <strong>dmy</strong>. En otro modulos estaremos hablando del paquete <strong>lubridate</strong> exclusivamente.</p>
<p>La segunda parte es convertir estas fechas en el día del año, o sea del primer día al ultimo día del año (1-365 o 366).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb36-2"><a href="#cb36-2"></a>ASBESTOS_QUEBEC<span class="op">$</span>fecha &lt;-<span class="st"> </span><span class="kw">with</span>(ASBESTOS_QUEBEC, <span class="kw">ymd</span>(<span class="kw">sprintf</span>(<span class="st">&#39;%04d%02d%02d&#39;</span>,</span>
<span id="cb36-3"><a href="#cb36-3"></a>                                 Year, Mes, day1)))</span>
<span id="cb36-4"><a href="#cb36-4"></a><span class="kw">head</span>(ASBESTOS_QUEBEC) <span class="co"># note que ahora que la columna &quot;fecha&quot; se reconoce como una &quot;date&quot; y no un número</span></span></code></pre></div>
<pre><code>##   Year Mes Temp_Prom_Max Temp_Prom_Min   Fecha day1      fecha
## 1 1948   6          22.2           9.9 1948-06    1 1948-06-01
## 2 1948   7          25.5          14.2 1948-07    1 1948-07-01
## 3 1948   8          24.9          14.2 1948-08    1 1948-08-01
## 4 1948   9          21.6           8.4 1948-09    1 1948-09-01
## 5 1948  10          12.0           2.6 1948-10    1 1948-10-01
## 6 1948  11          10.3           1.9 1948-11    1 1948-11-01</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>ASBESTOS_QUEBEC<span class="op">$</span>diaanual=<span class="kw">yday</span>(ASBESTOS_QUEBEC<span class="op">$</span>fecha) <span class="co"># Este es para convertir las fechas del año consecutivos, de 1 al 365. </span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="kw">tail</span>(ASBESTOS_QUEBEC)</span></code></pre></div>
<pre><code>##     Year Mes Temp_Prom_Max Temp_Prom_Min   Fecha day1      fecha diaanual
## 461 1986  10          10.5           2.7 1986-10    1 1986-10-01      274
## 462 1986  11           2.2          -5.7 1986-11    1 1986-11-01      305
## 463 1986  12            NA            NA 1986-12    1 1986-12-01      335
## 464 1987   1            NA            NA 1987-01    1 1987-01-01        1
## 465 1987   2          -7.8         -18.6 1987-02    1 1987-02-01       32
## 466 1987   3           3.3          -6.4 1987-03    1 1987-03-01       60</code></pre>
<hr />
</div>
</div>
<div id="opciones-y-parametros-de-facet_wrap" class="section level1">
<h1>Opciones y Parametros de <strong>facet_wrap</strong>:</h1>
<ul>
<li><p>ggplot(el archivo de datos, aes(la variable continua))</p>
<ul>
<li><p>facet_wrap(<span class="math inline">\(\sim\)</span> a + b, scales, nrow, ncol, switch, drop, dir)</p></li>
<li><p>facet: <span class="math inline">\(\sim\)</span> a + b o se puede usar un vector c(a + b)</p></li>
<li><p>scales: usar <strong>free</strong> si se quiere que las escalas sean determinadas por los gráficos individualmente o que todos los gráficos tengan la misma escala</p></li>
<li><p>nrow: la cantidad de filas</p></li>
<li><p>ncol: la cantidad de columnas</p></li>
<li><p>switch: presenta la identificación de la categoría abajo cuando se usa <strong>X</strong>, y a la izquierda cuando se usa Y</p></li>
<li><p>drop: añadir drop = FALSE para que muestre también las variables que no tienen información</p></li>
<li><p>dir: dirección <strong>h</strong> para horizontal y <strong>v</strong> vertical <strong>h</strong> es la dirección predeterminada</p></li>
</ul></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
